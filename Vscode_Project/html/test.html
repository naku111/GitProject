/**
 * @param {number} T - The number of test cases
 * @param {Array<Array<string>>} words - A 2D array where each sub-array contains words for a test case
 * @return {number[]} - An array containing the maximum recognizable lengths for each test case
 */
function maxRecognizableLengths(T, words) {
    const results = [];

    for (let caseIndex = 0; caseIndex < T; caseIndex++) {
        const wordCount = new Map();
        const letterFrequency = new Map();
        const uniqueLetters = new Set();

        const currentWords = words[caseIndex];
        for (const word of currentWords) {
            wordCount.set(word, (wordCount.get(word) || 0) + 1);
            for (const ch of word) {
                uniqueLetters.add(ch); // Collect unique letters
                letterFrequency.set(ch, (letterFrequency.get(ch) || 0) + 1);
            }
        }

        results.push(maxLengthOfRecognizedWords(wordCount, uniqueLetters, letterFrequency));
    }

    return results;
}

function maxLengthOfRecognizedWords(wordCount, uniqueLetters, letterFrequency) {
    let maxLength = 0;
    const letterList = Array.from(letterFrequency.entries());

    // Sort letters by frequency in descending order
    letterList.sort((a, b) => b[1] - a[1]);

    const size = letterList.length;

    // Generate combinations of three letters
    for (let i = 0; i < size; i++) {
        for (let j = i + 1; j < size; j++) {
            for (let k = j + 1; k < size; k++) {
                const knownLetters = new Set();
                knownLetters.add(letterList[i][0]);
                knownLetters.add(letterList[j][0]);
                knownLetters.add(letterList[k][0]);

                let totalLength = 0;

                // Calculate total length of recognizable words
                for (const [word, count] of wordCount.entries()) {
                    let recognizable = true;
                    for (const ch of word) {
                        if (!knownLetters.has(ch)) {
                            recognizable = false;
                            break;
                        }
                    }
                    if (recognizable) {
                        totalLength += word.length * count; // Add total length
                    }
                }
                maxLength = Math.max(maxLength, totalLength);
            }
        }
    }

    return maxLength;
}

// Example usage:
const T = 3;
const words = [
    ['aabbcc', 'cbcd'],
    ['abbc', 'accd', 'ccdb', 'bbdd'],
    ['abcd']
];

console.log(maxRecognizableLengths(T, words)); // Output: [6, 8, 0]
